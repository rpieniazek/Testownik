<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow 
      http://www.springframework.org/schema/webflow/spring-webflow-2.4.xsd">

	<var name="quizForm" class="pl.etestownik.controller.quiz.form.QuizForm" />

	<!-- <on-start> <evaluate expression="quizController.form()" result="flowScope.quizForm" 
		/> </on-start> -->

	<view-state id="quizName" view="/flows/adding-quiz/quizName" model="quizForm">
		<transition on="addQuestion" to="quizQuestion">
		</transition>
	</view-state>

	 <action-state id="saveQuizName">
		<evaluate expression="quizForm.quiz.name = requestParameters.quizName" />
		<evaluate expression="quizService.save(quizForm.quiz)" />
		<transition to="quizQuestion" />
	</action-state> 

	<view-state id="quizQuestion" view="/flows/adding-quiz/quizQuestion"
		model="quizForm">
		<transition on="nextQuestion" to="saveQuestion" />
		<transition on="finish" to="finish" />
	</view-state>

	<action-state id="saveQuestion">
		<evaluate expression="quizForm.questionString = requestParameters.question" />
		<!-- <evaluate expression="quizService.save(quizForm.getQuiz())" /> -->
		<transition to="quizQuestion" />
	</action-state>

	<end-state id="finish" view="/flows/adding-quiz/finish" />

</flow>